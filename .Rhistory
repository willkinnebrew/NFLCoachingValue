#read data from the url
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm')  %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%    # find comment sections
paste(collapse = '') %>%    # convert to strings
read_html() %>%    # reparse to HTML
html_nodes('#div_coaches_year tr td') %>% #the 'expanded_standings_overall' table contains data we want
html_text()
library(tidyverse)
library(nflfastR)
library(nflreadr)
# https://www.pro-football-reference.com/teams/crd/coaches.htm
nfl_to_pfr <- c(
ARI = "CRD",
ATL = "ATL",
BAL = "RAV",
BUF = "BUF",
CAR = "CAR",
CHI = "CHI",
CIN = "CIN",
CLE = "CLE",
DAL = "DAL",
DEN = "DEN",
DET = "DET",
GB  = "GNB",
HOU = "HTX",
IND = "CLT",
JAX = "JAX",
KC  = "KAN",
LAC = "SDG",
LAR = "LAR",
LV  = "RAM",
MIA = "MIA",
MIN = "MIN",
NE  = "NWE",
NO  = "NOR",
NYG = "NYG",
NYJ = "NYJ",
PHI = "PHI",
PIT = "PIT",
SEA = "SEA",
SF  = "SFO",
TB  = "TAM",
TEN = "OTI",
WSH = "WAS"
)
# Example usage:
nfl_to_pfr["GB"]   # returns "GNB"
nfl_to_pfr["NE"]   # returns "NWE"
#read data from the url
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm')  %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%    # find comment sections
paste(collapse = '') %>%    # convert to strings
read_html() %>%    # reparse to HTML
html_nodes('#div_coaches_year tr td') %>% #the 'expanded_standings_overall' table contains data we want
html_text()
library(rvest)
#read data from the url
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm')  %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%    # find comment sections
paste(collapse = '') %>%    # convert to strings
read_html() %>%    # reparse to HTML
html_nodes('#div_coaches_year tr td') %>% #the 'expanded_standings_overall' table contains data we want
html_text()
#read data from the url
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm')  %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%    # find comment sections
paste(collapse = '') %>%    # convert to strings
read_html() %>%    # reparse to HTML
html_nodes('#coaches_year tr td') %>% #the 'expanded_standings_overall' table contains data we want
html_text()
library(dplyr)
library(rvest)
#read data from the url
nfl_pass_defense_2024 <- read_html('https://www.pro-football-reference.com/years/2024/opp.htm')  %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%    # find comment sections
paste(collapse = '') %>%    # convert to strings
read_html() %>%    # reparse to HTML
html_nodes('#passing tr td') %>% #the 'expanded_standings_overall' table contains data we want
html_text()
# scrape table headers
nfl_pass_defense_2024_header <- read_html('https://www.pro-football-reference.com/years/2024/opp.htm')  %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%
paste(collapse = '') %>%
read_html() %>%
html_nodes('table#passing thead tr th') %>% #note this time we are scraping the 'th' part, which contains table header
html_text()
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm')  %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%    # find comment sections
paste(collapse = '') %>%    # convert to strings
read_html()
View(cardinals)
#read data from the url
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm')  %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%    # find comment sections
paste(collapse = '') %>%    # convert to strings
read_html() %>%    # reparse to HTML
html_nodes('#coaches_year tr td') %>%
html_text()
# scrape table headers
cardinals_header <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm')  %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%
paste(collapse = '') %>%
read_html() %>%
html_nodes('table#coaches_year thead tr th') %>% #note this time we are scraping the 'th' part, which contains table header
html_text()
#read data from the url
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm')  %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%    # find comment sections
paste(collapse = '') %>%    # convert to strings
read_html() %>%    # reparse to HTML
html_nodes('#coaches_year tr td') %>%
html_text()
#read data from the url
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm') %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%
paste(collapse = '') %>%
read_html() %>%
html_node('table#coaches_year') %>%
html_nodes('tbody tr') %>%
html_table(fill = TRUE)
#read data from the url
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm') %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%
paste(collapse = '') %>%
read_html() %>%
html_node('table#coaches_year') %>%
html_nodes('td tr') %>%
html_table(fill = TRUE)
#read data from the url
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm')  %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%    # find comment sections
paste(collapse = '') %>%    # convert to strings
read_html() %>%    # reparse to HTML
html_nodes('#coaches_year tr td') %>%
html_text()
#read data from the url
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm') %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%
paste(collapse = '') %>%
read_html() %>%
html_nodes('table#coaches_year tbody tr th, table#coaches_year tbody tr td') %>%
html_text()
cardinals
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm')  %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%    # find comment sections
paste(collapse = '') %>%    # convert to strings
read_html() %>%    # reparse to HTML
html_nodes('#coaches_year tr td') %>%
html_text()
#read data from the url
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm')  %>%
html_nodes(xpath = '//comment()') %>%
html_text() %>%
paste(collapse = '') %>%
read_html() %>%
html_nodes('#coaches_year tr th, #coaches_year tr td') %>%
html_text()
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm') %>%
html_node('table#coaches_year') %>%
html_table(fill = TRUE)
View(cardinals)
# scrape table headers
cardinals_header <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm')  %>%
html_nodes('table#coaches_year thead tr th') %>% #note this time we are scraping the 'th' part, which contains table header
html_text()
cardinals_header
cardinals_header <- cardinals_header[-(1:1)]
cardinals_header
#convert a vector to a data frame
cardinals <- data.frame(matrix(cardinals,ncol=length(cardinals_header),byrow=T),stringsAsFactors = F)
# add table header
colnames(cardinals)<- cardinals_header[1:length(cardinals_header)]
# display dataset
head(cardinals, 10)
View(cardinals)
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm') %>%
html_node('table#coaches_year') %>%
html_table(fill = TRUE)
# scrape table headers
cardinals_header <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm')  %>%
html_nodes('table#coaches_year thead tr th') %>% #note this time we are scraping the 'th' part, which contains table header
html_text()
cardinals_header <- cardinals_header[-(1:1)]
View(cardinals)
cardinals_header <- cardinals_header[-(1:4)]
# scrape table headers
cardinals_header <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm')  %>%
html_nodes('table#coaches_year thead tr th') %>% #note this time we are scraping the 'th' part, which contains table header
html_text()
cardinals_header <- cardinals_header[-(1:4)]
#convert a vector to a data frame
cardinals <- data.frame(matrix(cardinals,ncol=length(cardinals_header),byrow=T),stringsAsFactors = F)
# add table header
colnames(cardinals)<- cardinals_header[1:length(cardinals_header)]
# display dataset
head(cardinals, 10)
cardinals <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm') %>%
html_node('table#coaches_year') %>%
html_table(fill = TRUE)
# scrape table headers
cardinals_header <- read_html('https://www.pro-football-reference.com/teams/crd/coaches.htm')  %>%
html_nodes('table#coaches_year thead tr th') %>% #note this time we are scraping the 'th' part, which contains table header
html_text()
cardinals_header <- cardinals_header[-(1:4)]
View(cardinals)
#convert a vector to a data frame
cardinals <- data.frame(matrix(cardinals,ncol=length(cardinals_header),byrow=T),stringsAsFactors = F)
View(cardinals)
